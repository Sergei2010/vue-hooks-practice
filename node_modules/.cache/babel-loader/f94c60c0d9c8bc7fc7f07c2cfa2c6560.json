{"remainingRequest":"/Users/sergej/Documents/projects/practice/vue-hooks-practice/node_modules/babel-loader/lib/index.js!/Users/sergej/Documents/projects/practice/vue-hooks-practice/src/use/field.js","dependencies":[{"path":"/Users/sergej/Documents/projects/practice/vue-hooks-practice/src/use/field.js","mtime":1618594127679},{"path":"/Users/sergej/Documents/projects/practice/vue-hooks-practice/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sergej/Documents/projects/practice/vue-hooks-practice/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgeyByZWYsIHJlYWN0aXZlLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7Cgp2YXIgbm90ID0gZnVuY3Rpb24gbm90KHZhbCkgewogIHJldHVybiAhdmFsOwp9OwoKZXhwb3J0IGZ1bmN0aW9uIHVzZUZpZWxkKGZpZWxkKSB7CiAgdmFyIHZhbGlkID0gcmVmKHRydWUpOwogIHZhciB2YWx1ZSA9IHJlZihmaWVsZC52YWx1ZSk7CiAgdmFyIHRvdWNoZWQgPSByZWYoZmFsc2UpOwogIHZhciBlcnJvcnMgPSByZWFjdGl2ZSh7fSk7CgogIHZhciByZWFzc2lnbiA9IGZ1bmN0aW9uIHJlYXNzaWduKHZhbCkgewogICAgdmFyIF9maWVsZCR2YWxpZGF0b3JzOwoKICAgIHZhbGlkLnZhbHVlID0gdHJ1ZTsKICAgIE9iamVjdC5rZXlzKChfZmllbGQkdmFsaWRhdG9ycyA9IGZpZWxkLnZhbGlkYXRvcnMpICE9PSBudWxsICYmIF9maWVsZCR2YWxpZGF0b3JzICE9PSB2b2lkIDAgPyBfZmllbGQkdmFsaWRhdG9ycyA6IHt9KS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdmFyIGlzVmFsaWQgPSBmaWVsZC52YWxpZGF0b3JzW25hbWVdKHZhbCk7CiAgICAgIGVycm9yc1tuYW1lXSA9IG5vdChpc1ZhbGlkKTsKCiAgICAgIGlmIChub3QoaXNWYWxpZCkpIHsKICAgICAgICB2YWxpZC52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKICB9OwoKICB3YXRjaCh2YWx1ZSwgcmVhc3NpZ24pOwogIHJlYXNzaWduKGZpZWxkLnZhbHVlKTsKICByZXR1cm4gewogICAgdmFsdWU6IHZhbHVlLAogICAgdmFsaWQ6IHZhbGlkLAogICAgZXJyb3JzOiBlcnJvcnMsCiAgICB0b3VjaGVkOiB0b3VjaGVkLAogICAgYmx1cjogZnVuY3Rpb24gYmx1cigpIHsKICAgICAgcmV0dXJuIHRvdWNoZWQudmFsdWUgPSB0cnVlOwogICAgfQogIH07Cn0="},{"version":3,"sources":["/Users/sergej/Documents/projects/practice/vue-hooks-practice/src/use/field.js"],"names":["ref","reactive","watch","not","val","useField","field","valid","value","touched","errors","reassign","Object","keys","validators","map","name","isValid","blur"],"mappings":";;AAAA,SAASA,GAAT,EAAcC,QAAd,EAAwBC,KAAxB,QAAqC,KAArC;;AAEA,IAAMC,GAAG,GAAG,SAANA,GAAM,CAAAC,GAAG;AAAA,SAAI,CAACA,GAAL;AAAA,CAAf;;AAEA,OAAO,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;AAC5B,MAAMC,KAAK,GAAGP,GAAG,CAAC,IAAD,CAAjB;AACA,MAAMQ,KAAK,GAAGR,GAAG,CAACM,KAAK,CAACE,KAAP,CAAjB;AACA,MAAMC,OAAO,GAAGT,GAAG,CAAC,KAAD,CAAnB;AACA,MAAMU,MAAM,GAAGT,QAAQ,CAAC,EAAD,CAAvB;;AAEA,MAAMU,QAAQ,GAAG,SAAXA,QAAW,CAAAP,GAAG,EAAI;AAAA;;AACpBG,IAAAA,KAAK,CAACC,KAAN,GAAc,IAAd;AACAI,IAAAA,MAAM,CAACC,IAAP,sBAAYP,KAAK,CAACQ,UAAlB,iEAAgC,EAAhC,EAAoCC,GAApC,CAAwC,UAAAC,IAAI,EAAI;AAC5C,UAAMC,OAAO,GAAGX,KAAK,CAACQ,UAAN,CAAiBE,IAAjB,EAAuBZ,GAAvB,CAAhB;AACAM,MAAAA,MAAM,CAACM,IAAD,CAAN,GAAeb,GAAG,CAACc,OAAD,CAAlB;;AACA,UAAId,GAAG,CAACc,OAAD,CAAP,EAAkB;AACdV,QAAAA,KAAK,CAACC,KAAN,GAAc,KAAd;AACH;AACJ,KAND;AAOH,GATD;;AAWAN,EAAAA,KAAK,CAACM,KAAD,EAAQG,QAAR,CAAL;AAEAA,EAAAA,QAAQ,CAACL,KAAK,CAACE,KAAP,CAAR;AAEA,SAAO;AAAEA,IAAAA,KAAK,EAALA,KAAF;AAASD,IAAAA,KAAK,EAALA,KAAT;AAAgBG,IAAAA,MAAM,EAANA,MAAhB;AAAwBD,IAAAA,OAAO,EAAPA,OAAxB;AAAiCS,IAAAA,IAAI,EAAE;AAAA,aAAMT,OAAO,CAACD,KAAR,GAAgB,IAAtB;AAAA;AAAvC,GAAP;AACH","sourcesContent":["import { ref, reactive, watch } from 'vue'\n\nconst not = val => !val\n\nexport function useField(field) {\n    const valid = ref(true)\n    const value = ref(field.value)\n    const touched = ref(false)\n    const errors = reactive({})\n\n    const reassign = val => {\n        valid.value = true\n        Object.keys(field.validators ?? {}).map(name => {\n            const isValid = field.validators[name](val)\n            errors[name] = not(isValid)\n            if (not(isValid)) {\n                valid.value = false\n            }\n        })\n    }\n\n    watch(value, reassign)\n\n    reassign(field.value)\n\n    return { value, valid, errors, touched, blur: () => touched.value = true }\n}"]}]}